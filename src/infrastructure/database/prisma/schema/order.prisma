enum OrderStatus {
    PENDING
    PREPARING
    SERVED
    COMPLETED
    CANCELED
}

enum PaymentMethod {
    CASH
    CARD
    PAY_LATER
}

model Order {
    id            Int            @id @default(autoincrement())
    tableId       Int?
    userId        Int
    status        OrderStatus    @default(PENDING)
    paymentMethod PaymentMethod?
    paid          Boolean        @default(false)

    table   Table?      @relation(fields: [tableId], references: [id])
    user    User        @relation(fields: [userId], references: [id])
    items   OrderItem[]
    Invoice Invoice[]

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt
}

model OrderItem {
    id         Int   @id @default(autoincrement())
    orderId    Int
    menuItemId Int
    quantity   Int   @default(1)
    price      Float // snapshot price

    order    Order    @relation(fields: [orderId], references: [id])
    menuItem MenuItem @relation(fields: [menuItemId], references: [id])
}
