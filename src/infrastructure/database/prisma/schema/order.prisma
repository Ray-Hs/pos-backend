model Order {
    id      Int  @id @default(autoincrement())
    tableId Int?
    userId  Int

    table   Table?      @relation(fields: [tableId], references: [id])
    user    User        @relation(fields: [userId], references: [id])
    items   OrderItem[]
    Invoice Invoice[]

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    @@index([tableId, userId])
}

model OrderItem {
    id         Int   @id @default(autoincrement())
    orderId    Int
    menuItemId Int
    quantity   Int   @default(1)
    price      Float // snapshot price
    //? Add notes and other stuff here

    order    Order    @relation(fields: [orderId], references: [id], onDelete: Cascade)
    menuItem MenuItem @relation(fields: [menuItemId], references: [id])

    @@index([orderId, menuItemId, quantity])
}
