enum OrderStatus {
    PENDING
    PREPARING
    SERVED
    COMPLETED
    CANCELED
}

enum PaymentMethod {
    CASH
    CARD
    PAY_LATER
}

model Order {
    id            Int            @id @default(autoincrement())
    tableId       Int?
    userId        Int
    total         Float          @default(0) // Later make into invoice, include: tax, total, discount
    status        OrderStatus    @default(PENDING)
    paymentMethod PaymentMethod?
    paid          Boolean        @default(false)
    createdAt     DateTime       @default(now())
    updatedAt     DateTime       @updatedAt

    table Table?      @relation(fields: [tableId], references: [id])
    user  User        @relation(fields: [userId], references: [id])
    items OrderItem[]
}

model OrderItem {
    id         Int   @id @default(autoincrement())
    orderId    Int
    menuItemId Int
    quantity   Int   @default(1)
    price      Float // snapshot price

    order    Order    @relation(fields: [orderId], references: [id])
    menuItem MenuItem @relation(fields: [menuItemId], references: [id])
}
