model CompanyDebt {
    id              Int           @id @default(autoincrement())
    companyId       Int
    company         CompanyInfo   @relation(fields: [companyId], references: [id])
    product         String
    invoiceNumber   String?
    quantity        Int           @default(1)
    price           Int           @default(0)
    totalAmount     Int?          @default(0)
    remainingAmount Int?          @default(0)
    userId          Int
    user            User          @relation(fields: [userId], references: [id])
    status          PaymentStatus @default(PENDING)

    createdAt DateTime  @default(now())
    updatedAt DateTime  @updatedAt
    Payment   Payment[]

    @@index([id, invoiceNumber])
}

enum PaymentStatus {
    PAID
    PARTIAL
    PENDING
}

model Payment {
    id Int @id @default(autoincrement())

    companyDebtId   Int
    companyDebt     CompanyDebt @relation(fields: [companyDebtId], references: [id])
    invoiceNumber   String
    userId          Int
    user            User        @relation(fields: [userId], references: [id])
    currency        Currency    @default(IQD)
    amount          Int
    note            String?
    isLatestVersion Boolean?    @default(true)
    paymentDate     DateTime    @default(now())

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt
}
